<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1 - Architecture Microservices</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìò WEEK 2</h1>
            <p class="subtitle">Architecture Microservices & API Gateway</p>
        </header>

        <div class="back-btn">
            <a href="index.html" class="btn">‚Üê Retour √† l'accueil</a>
        </div>

        <main>
            <!-- ==================== ARCHITECTURE MICROSERVICES ==================== -->
            <section>
                <h2>1. ARCHITECTURE MICROSERVICES</h2>
                
                <div class="definition">
                    <strong>üìå D√©finition</strong>
                    <p>Une architecture microservices est un style architectural o√π l'application est d√©coup√©e en petits services ind√©pendants, chacun responsable d'une fonctionnalit√© m√©tier sp√©cifique.</p>
                </div>

                <h3>Principes fondamentaux</h3>
                <ul>
                    <li><strong>Une responsabilit√© = Un service</strong><br>
                        Chaque microservice a une et une seule responsabilit√© claire.</li>
                    
                    <li><strong>Chaque service est ind√©pendant</strong><br>
                        D√©veloppement, d√©ploiement, et scaling ind√©pendants.<br>
                        Notamment : chaque service a sa propre base de donn√©es.</li>
                    
                    <li><strong>Interconnect√©s par API</strong><br>
                        Les services communiquent entre eux via des API REST, gRPC, ou message queues.</li>
                    
                    <li><strong>Service Registry/Discovery</strong><br>
                        Un registre centralis√© permet aux services de se d√©couvrir dynamiquement.</li>
                    
                    <li><strong>API Gateway</strong><br>
                        Point d'entr√©e unique qui centralise l'acc√®s pour les utilisateurs.</li>
                    
                    <li><strong>Config Server</strong><br>
                        Centralise les param√®tres de configuration des microservices (.properties ou .yml).</li>
                </ul>

                <div class="example">
                    <strong>üí° Exemple concret : Application E-commerce</strong>
                    <p><strong>Sans microservices (Monolithe) :</strong><br>
                    Une seule application contient : gestion produits + gestion commandes + gestion clients + paiement</p>
                    
                    <p><strong>Avec microservices :</strong><br>
                    ‚ñ∂ Product Service (port 8081)<br>
                    ‚ñ∂ Order Service (port 8082)<br>
                    ‚ñ∂ Customer Service (port 8083)<br>
                    ‚ñ∂ Payment Service (port 8084)<br>
                    ‚ñ∂ API Gateway (port 8080)</p>
                </div>
            </section>

            <!-- ==================== D√âCOUPAGE EN MICROSERVICES ==================== -->
            <section>
                <h2>2. D√âCOUPAGE D'UNE APPLICATION</h2>

                <h3>Comment d√©couper ?</h3>
                
                <div class="definition">
                    <strong>üìå Domain-Driven Design (DDD)</strong>
                    <p>M√©thode pour identifier les fronti√®res des microservices bas√©e sur les domaines m√©tier.</p>
                </div>

                <h3>Exemples de domaines :</h3>
                <ul>
                    <li>Catalogue produits</li>
                    <li>Gestion des commandes</li>
                    <li>Gestion des clients</li>
                    <li>Paiement</li>
                    <li>Notification</li>
                </ul>

                <h3>R√®gles importantes :</h3>
                <ul>
                    <li><strong>S√©paration des pr√©occupations</strong> (Separation of Concerns)<br>
                        Chaque microservice g√®re son propre domaine.</li>
                    
                    <li><strong>Une base de donn√©es par microservice</strong><br>
                        Principe fondamental : aucun service ne peut acc√©der directement √† la DB d'un autre.</li>
                    
                    <li><strong>Bien d√©terminer les fronti√®res</strong><br>
                        Un d√©coupage trop fin = trop de communication = complexit√©.<br>
                        <p>exemple si bcp trop de microservice par exemple 12 on perds de la perfomance , plus de microservice veut dire + de requ√™te = lenteur </p>
                        Un d√©coupage trop large = perd les avantages des microservices.</li>
                        <p>√† l'inverse si trop de micro service en 1 par exemple une architecture monolithe on mes toute le fcontionallit√© dans une seul endroit on pert les qualit√© microservice qui consiste en s√©parer les logique m√©tier en services specifique </p>
                </ul>

                <div class="example">
                    <strong>üí° Exemple : Order Service</strong>
                    <p>Responsabilit√©s :<br>
                    ‚úì Cr√©er une commande<br>
                    ‚úì R√©cup√©rer l'historique des commandes<br>
                    ‚úì Mettre √† jour le statut d'une commande</p>
                    
                    <p>Ne fait PAS :<br>
                    ‚úó G√©rer les stocks (c'est Product Service)<br>
                    ‚úó G√©rer les paiements (c'est Payment Service)<br>
                    ‚úó G√©rer les clients (c'est Customer Service)</p>
                </div>
            </section>

            <!-- ==================== API GATEWAY ==================== -->
            <section>
                <h2>3. API GATEWAY</h2>

                <div class="definition">
                    <strong>üìå Qu'est-ce qu'un API Gateway ?</strong>
                    <p>Un API Gateway est le point d'entr√©e unique pour toutes les requ√™tes des clients vers les microservices. C'est comme un "portier intelligent" qui route les requ√™tes vers le bon service.</p>
                </div>

                <h3>R√¥les de l'API Gateway</h3>

                <table>
                    <thead>
                        <tr>
                            <th>R√¥le</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Routage</strong></td>
                            <td>Redirige les requ√™tes vers le bon microservice<br>
                                Ex: /api/customers ‚Üí Customer Service (8082)</td>
                        </tr>
                        <tr>
                            <td><strong>S√©curit√©</strong></td>
                            <td>Centralise l'authentification et l'autorisation</td>
                        </tr>
                        <tr>
                            <td><strong>Rate Limiting</strong></td>
                            <td>Limite le nombre d'acc√®s pour √©viter les abus</td>
                        </tr>
                        <tr>
                            <td><strong>Logging</strong></td>
                            <td>Trace toutes les requ√™tes qui passent</td>
                        </tr>
                        <tr>
                            <td><strong>Load Balancing</strong></td>
                            <td>R√©partit la charge entre plusieurs instances</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Avantages</h3>
                <ul>
                    <li>Les clients n'ont qu'une seule URL √† conna√Ætre</li>
                    <li>S√©curit√© centralis√©e (un seul point √† prot√©ger)</li>
                    <li>Monitoring facilit√©</li>
                    <li>Les microservices restent cach√©s derri√®re le gateway</li>
                </ul>

                <div class="example">
                    <strong>üí° Flux avec API Gateway</strong>
                    <pre>
Client (browser/mobile)
    ‚Üì
    GET http://localhost:8080/api/customers
    ‚Üì
API Gateway (port 8080)
    ‚Üì (routage interne)
    GET http://localhost:8082/customers
    ‚Üì
Customer Service (port 8082)
    ‚Üì
    Retourne: [{"id":1, "name":"Jean"}]
    ‚Üì
API Gateway
    ‚Üì
Client re√ßoit: [{"id":1, "name":"Jean"}]
                    </pre>
                </div>
            </section>

            <!-- ==================== ARCHITECTURE CLASSIQUE ==================== -->
            <section>
                <h2>4. ARCHITECTURE MICROSERVICE CLASSIQUE</h2>

                <h3>Structure d'un microservice Spring Boot</h3>

                <div class="definition">
                    <strong>üìå Les 4 couches principales</strong>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Couche</th>
                            <th>Package</th>
                            <th>R√¥le</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Model</strong></td>
                            <td>model/</td>
                            <td>D√©finition des donn√©es (entit√©s JPA)<br>
                                Ex: Customer.java, Product.java</td>
                        </tr>
                        <tr>
                            <td><strong>Data</strong></td>
                            <td>repository/</td>
                            <td>Acc√®s aux donn√©es (interfaces JPA Repository)<br>
                                Ex: CustomerRepository.java</td>
                        </tr>
                        <tr>
                            <td><strong>Service</strong></td>
                            <td>service/</td>
                            <td>Logique m√©tier (business logic)<br>
                                Ex: CustomerService.java</td>
                        </tr>
                        <tr>
                            <td><strong>Controller</strong></td>
                            <td>controller/</td>
                            <td>Endpoints REST (API)<br>
                                Ex: CustomerController.java</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Principe de responsabilit√© unique</h3>
                <ul>
                    <li><strong>Model</strong> : Repr√©sente les donn√©es</li>
                    <li><strong>Repository</strong> : Communique avec la base de donn√©es</li>
                    <li><strong>Service</strong> : Contient la logique m√©tier</li>
                    <li><strong>Controller</strong> : G√®re les requ√™tes HTTP</li>
                </ul>

                <div class="example">
                    <strong>üí° Exemple de structure</strong>
                    <pre>
customer-service/
‚îî‚îÄ‚îÄ src/main/java/com/example/customerservice/
    ‚îú‚îÄ‚îÄ CustomerServiceApplication.java
    ‚îú‚îÄ‚îÄ model/
    ‚îÇ   ‚îî‚îÄ‚îÄ Customer.java
    ‚îú‚îÄ‚îÄ repository/
    ‚îÇ   ‚îî‚îÄ‚îÄ CustomerRepository.java
    ‚îú‚îÄ‚îÄ service/
    ‚îÇ   ‚îî‚îÄ‚îÄ CustomerService.java
    ‚îî‚îÄ‚îÄ controller/
        ‚îî‚îÄ‚îÄ CustomerController.java
                    </pre>
                </div>
            </section>

            <!-- ==================== PROPERTIES ==================== -->
            <section>
                <h2>5. APPLICATION.PROPERTIES</h2>

                <div class="definition">
                    <strong>üìå Qu'est-ce que application.properties ?</strong>
                    <p>Fichier de configuration situ√© dans src/main/resources/ qui contient tous les param√®tres de l'application.</p>
                </div>

                <h3>Informations typiques :</h3>
                <ul>
                    <li>Nom de l'application</li>
                    <li>Port du serveur</li>
                    <li>Configuration de la base de donn√©es</li>
                    <li>URLs des autres services (pour API Gateway)</li>
                </ul>

                <div class="example">
                    <strong>üí° Exemple : Customer Service</strong>
                    <pre>
# Nom du service
spring.application.name=customer-service

# Port d'√©coute
server.port=8082

# Configuration H2 Database (en m√©moire)
spring.datasource.url=jdbc:h2:mem:customerdb
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.jpa.hibernate.ddl-auto=create-drop
                    </pre>
                </div>

                <div class="example">
                    <strong>üí° Exemple : API Gateway</strong>
                    <pre>
# Nom du service
spring.application.name=api-gateway

# Port d'√©coute
server.port=8080

# URLs des microservices
customer.service.url=http://localhost:8082
product.service.url=http://localhost:8081
order.service.url=http://localhost:8083
                    </pre>
                </div>
            </section>

            <!-- ==================== COMMUNICATION ENTRE SERVICES ==================== -->
            <section>
                <h2>6. LIENS ENTRE SERVICES - COMMUNICATION</h2>

                <div class="definition">
                    <strong>üìå Comment les microservices communiquent-ils ?</strong>
                    <p>Les microservices doivent √©changer des donn√©es entre eux. Il existe deux grandes approches : synchrone et asynchrone.</p>
                </div>

                <h3>Communication Synchrone</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Avantages</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>REST</strong></td>
                            <td>‚Ä¢ Client HTTP standard<br>
                                ‚Ä¢ Utilise les verbes HTTP (GET, POST, PUT, DELETE)<br>
                                ‚Ä¢ Format JSON ou XML</td>
                            <td>‚Ä¢ Simple et universel<br>
                                ‚Ä¢ Facile √† debugger<br>
                                ‚Ä¢ Compatible partout</td>
                        </tr>
                        <tr>
                            <td><strong>gRPC</strong></td>
                            <td>‚Ä¢ Remote Procedure Call (Appel de proc√©dure √† distance)<br>
                                ‚Ä¢ Format binaire (Protocol Buffers)<br>
                                ‚Ä¢ Plus rapide et plus efficace que REST</td>
                            <td>‚Ä¢ Tr√®s performant<br>
                                ‚Ä¢ Typage fort<br>
                                ‚Ä¢ Bidirectionnel (streaming)</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Communication Asynchrone</h3>

                <div class="definition">
                    <strong>üìå On verra plus tard</strong>
                    <p>La communication asynchrone sera d√©taill√©e dans les prochaines semaines avec :</p>
                    <ul style="margin-top: 10px;">
                        <li><strong>Message Queue</strong> : Files d'attente de messages (ex: RabbitMQ)</li>
                        <li><strong>√âv√©nements</strong> : Architecture Event-Driven (pub/sub)</li>
                    </ul>
                </div>

                <div class="example">
                    <strong>üí° REST vs gRPC - Exemple pratique</strong>
                    
                    <p><strong>REST (ce qu'on utilise dans notre projet) :</strong></p>
                    <pre>
// API Gateway appelle Customer Service via REST
GET http://localhost:8082/customers
‚Üí Retourne: [{"id":1, "name":"Jean"}]

// Simple, lisible, format JSON
                    </pre>

                    <p><strong>gRPC (plus rapide pour communication interne) :</strong></p>
                    <pre>
// Appel de proc√©dure distant
customerService.getCustomers()
‚Üí Retourne: donn√©es en format binaire

// Plus rapide, plus compact
// Utilis√© surtout entre microservices internes
                    </pre>
                </div>

                <h3>Quand utiliser quoi ?</h3>
                <ul>
                    <li><strong>REST</strong> : Communication externe (API publique, frontend ‚Üí backend)</li>
                    <li><strong>gRPC</strong> : Communication interne (entre microservices pour plus de performance)</li>
                    <li><strong>Message Queue / Events</strong> : Quand on ne veut pas attendre la r√©ponse (asynchrone)</li>
                </ul>
            </section>

            <!-- ==================== ANNOTATIONS IMPORTANTES ==================== -->
            <section>
                <h2>7. ANNOTATIONS SPRING IMPORTANTES</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Annotation</th>
                            <th>O√π ?</th>
                            <th>R√¥le</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>@SpringBootApplication</strong></td>
                            <td>Classe principale</td>
                            <td>D√©marre l'application Spring Boot<br>
                                Combine @Configuration, @EnableAutoConfiguration, @ComponentScan</td>
                        </tr>
                        <tr>
                            <td><strong>@RestController</strong></td>
                            <td>Controller</td>
                            <td>Indique que la classe g√®re des API REST<br>
                                Retourne automatiquement du JSON</td>
                        </tr>
                        <tr>
                            <td><strong>@RequestMapping</strong></td>
                            <td>Controller</td>
                            <td>D√©finit le pr√©fixe d'URL pour toute la classe<br>
                                Ex: @RequestMapping("/api")</td>
                        </tr>
                        <tr>
                            <td><strong>@GetMapping</strong></td>
                            <td>M√©thode</td>
                            <td>R√©pond aux requ√™tes HTTP GET<br>
                                Ex: @GetMapping("/customers")</td>
                        </tr>
                        <tr>
                            <td><strong>@PostMapping</strong></td>
                            <td>M√©thode</td>
                            <td>R√©pond aux requ√™tes HTTP POST (cr√©ation)</td>
                        </tr>
                        <tr>
                            <td><strong>@DeleteMapping</strong></td>
                            <td>M√©thode</td>
                            <td>R√©pond aux requ√™tes HTTP DELETE (suppression)</td>
                        </tr>
                        <tr>
                            <td><strong>@PathVariable</strong></td>
                            <td>Param√®tre</td>
                            <td>R√©cup√®re une variable depuis l'URL<br>
                                Ex: /customers/{id} ‚Üí @PathVariable Long id</td>
                        </tr>
                        <tr>
                            <td><strong>@RequestBody</strong></td>
                            <td>Param√®tre</td>
                            <td>R√©cup√®re le body JSON de la requ√™te</td>
                        </tr>
                        <tr>
                            <td><strong>@Service</strong></td>
                            <td>Service</td>
                            <td>Indique que la classe contient la logique m√©tier</td>
                        </tr>
                        <tr>
                            <td><strong>@Repository</strong></td>
                            <td>Repository</td>
                            <td>Indique que l'interface g√®re l'acc√®s aux donn√©es</td>
                        </tr>
                        <tr>
                            <td><strong>@Entity</strong></td>
                            <td>Model</td>
                            <td>Indique que la classe est une entit√© JPA (table DB)</td>
                        </tr>
                        <tr>
                            <td><strong>@Value</strong></td>
                            <td>Variable</td>
                            <td>Injecte une valeur depuis application.properties<br>
                                Ex: @Value("${server.port}")</td>
                        </tr>
                        <tr>
                            <td><strong>@Autowired</strong></td>
                            <td>Variable</td>
                            <td>Injection automatique de d√©pendances Spring</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- ==================== R√âSUM√â ==================== -->
            <section>
                <h2>8. R√âSUM√â DE LA WEEK 1</h2>

                <div class="info-box">
                    <h3>‚úÖ Ce que nous avons appris</h3>
                    <ul>
                        <li>Architecture microservices : d√©coupage par responsabilit√©</li>
                        <li>Chaque service est ind√©pendant (code + DB)</li>
                        <li>API Gateway = point d'entr√©e unique</li>
                        <li>Structure classique : model / repository / service / controller</li>
                        <li>Configuration avec application.properties</li>
                        <li>Communication synchrone : REST (simple) vs gRPC (performant)</li>
                        <li>Annotations Spring Boot essentielles</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h3>üõ†Ô∏è Projet pratique r√©alis√©</h3>
                    <ul>
                        <li>Customer Service (port 8082)</li>
                        <li>API Gateway (port 8080)</li>
                        <li>Communication via RestTemplate</li>
                        <li>Base de donn√©es H2 en m√©moire</li>
                    </ul>
                </div>
            </section>

        </main>

        <div class="back-btn">
            <a href="index.html" class="btn">‚Üê Retour √† l'accueil</a>
        </div>

        <footer>
            <p>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</p>
            <p>Week 1 - Architecture Microservices & API Gateway</p>
            <p>Bachelier Informatique 2022-2026 - BAC3</p>
        </footer>
    </div>
</body>
</html>
